<!DOCTYPE html>
<html lang="zh-TW" data-bs-theme="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Êô∫ËÉΩÂä©Êâã - ÂÖ®ÂäüËÉΩÁâà</title>
    
    <!-- Bootstrap CSS with Replit dark theme -->
    <link href="https://cdn.replit.com/agent/bootstrap-agent-dark-theme.min.css" rel="stylesheet">
    
    <!-- Prism.js for syntax highlighting -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-tomorrow.min.css" rel="stylesheet">
    
    <!-- Font Awesome for icons -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" rel="stylesheet">
    
    <!-- Bootstrap Icons -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet">
    
    <!-- Custom CSS -->
    <link href="{{ url_for('static', filename='css/enhanced_style.css') }}" rel="stylesheet">
</head>
<body>
    <div class="container-fluid h-100">
        <div class="row h-100">
            <!-- Sidebar -->
            <div class="col-md-3 col-lg-2 sidebar" id="sidebar">
                <div class="sidebar-header">
                    <h5 class="mb-0">
                        <i class="fas fa-robot me-2"></i>
                        AI Êô∫ËÉΩÂä©Êâã
                    </h5>
                    <button type="button" class="btn btn-outline-secondary btn-sm d-md-none" id="sidebarToggle">
                        <i class="fas fa-bars"></i>
                    </button>
                </div>
                
                <!-- Navigation Tabs -->
                <div class="nav-tabs-container">
                    <ul class="nav nav-tabs flex-column" id="mainTabs" role="tablist">
                        <li class="nav-item" role="presentation">
                            <button class="nav-link active" id="chat-tab" data-bs-toggle="tab" data-bs-target="#chat-panel" type="button" role="tab">
                                <i class="fas fa-comments me-2"></i>Â∞çË©±ËÅäÂ§©
                            </button>
                        </li>
                        <li class="nav-item" role="presentation">
                            <button class="nav-link" id="files-tab" data-bs-toggle="tab" data-bs-target="#files-panel" type="button" role="tab">
                                <i class="fas fa-file-upload me-2"></i>Ê™îÊ°àËôïÁêÜ
                            </button>
                        </li>
                        <li class="nav-item" role="presentation">
                            <button class="nav-link" id="tools-tab" data-bs-toggle="tab" data-bs-target="#tools-panel" type="button" role="tab">
                                <i class="fas fa-tools me-2"></i>ÂØ¶Áî®Â∑•ÂÖ∑
                            </button>
                        </li>
                        <li class="nav-item" role="presentation">
                            <button class="nav-link" id="settings-tab" data-bs-toggle="tab" data-bs-target="#settings-panel" type="button" role="tab">
                                <i class="fas fa-cog me-2"></i>ÂÄã‰∫∫Ë®≠ÂÆö
                            </button>
                        </li>
                        <li class="nav-item" role="presentation">
                            <button class="nav-link" id="collaborate-tab" data-bs-toggle="tab" data-bs-target="#collaborate-panel" type="button" role="tab">
                                <i class="fas fa-users me-2"></i>Âçî‰ΩúÂäüËÉΩ
                            </button>
                        </li>
                        <li class="nav-item" role="presentation">
                            <button class="nav-link" id="games-tab" data-bs-toggle="tab" data-bs-target="#games-panel" type="button" role="tab">
                                <i class="fas fa-gamepad me-2"></i>ÈÅäÊà≤‰∏≠ÂøÉ
                            </button>
                        </li>
                    </ul>
                </div>
                
                <!-- Chat History -->
                <div class="chat-history mt-3">
                    <div class="d-flex justify-content-between align-items-center mb-2">
                        <h6 class="mb-0">Â∞çË©±Ë®òÈåÑ</h6>
                        <button type="button" class="btn btn-outline-secondary btn-sm" id="newChatBtn">
                            <i class="fas fa-plus"></i>
                        </button>
                    </div>
                    <div id="chatHistoryList" class="chat-history-list">
                        <!-- Chat history items will be loaded here -->
                    </div>
                </div>
                
                <!-- Quick Replies -->
                <div class="quick-replies mt-3">
                    <h6 class="mb-2">Âø´ÈÄüÂõûË¶Ü</h6>
                    <div id="quickRepliesList" class="quick-replies-list">
                        <!-- Quick replies will be loaded here -->
                    </div>
                </div>
            </div>
            
            <!-- Main Content -->
            <div class="col-md-9 col-lg-10 main-content">
                <div class="tab-content h-100" id="mainTabsContent">
                    <!-- Chat Panel -->
                    <div class="tab-pane fade show active h-100" id="chat-panel" role="tabpanel">
                        <div class="chat-container h-100">
                            <!-- Chat Header -->
                            <div class="chat-header">
                                <div class="d-flex justify-content-between align-items-center">
                                    <div class="d-flex align-items-center">
                                        <h4 class="mb-0 me-3">AI Â∞çË©±Âä©Êâã</h4>
                                        <span class="badge bg-success" id="connectionStatus">Â∑≤ÈÄ£Á∑ö</span>
                                    </div>
                                    <div class="header-controls">
                                        <button type="button" class="btn btn-outline-secondary btn-sm me-2" id="voiceToggleBtn">
                                            <i class="fas fa-microphone"></i>
                                        </button>
                                        <button type="button" class="btn btn-outline-secondary btn-sm me-2" id="bookmarkBtn">
                                            <i class="fas fa-bookmark"></i>
                                        </button>
                                        <button type="button" class="btn btn-outline-secondary btn-sm me-2" id="shareBtn">
                                            <i class="fas fa-share"></i>
                                        </button>
                                        <button type="button" class="btn btn-outline-secondary btn-sm me-2" id="exportBtn">
                                            <i class="fas fa-download"></i>
                                        </button>
                                        <button type="button" class="btn btn-outline-secondary btn-sm" id="clearHistoryBtn">
                                            <i class="fas fa-trash"></i>
                                        </button>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Chat Messages -->
                            <div id="chatMessages" class="chat-messages">
                                <div class="message-item system-message">
                                    <div class="message-content">
                                        <i class="fas fa-robot me-2"></i>
                                        Ê≠°Ëøé‰ΩøÁî® AI Êô∫ËÉΩÂä©ÊâãÔºÅÊàëÁèæÂú®ÂÖ∑ÂÇô‰ª•‰∏ãÂäüËÉΩÔºö
                                        <ul class="mt-2 mb-0">
                                            <li>üí¨ Êô∫ËÉΩÂ∞çË©±ËàáÂïèÁ≠î</li>
                                            <li>üìÅ Ê™îÊ°à‰∏äÂÇ≥ËàáÂàÜÊûê</li>
                                            <li>üõ†Ô∏è ÂØ¶Áî®Â∑•ÂÖ∑ÈõÜÂêà</li>
                                            <li>üé® ÂÄã‰∫∫ÂåñË®≠ÂÆö</li>
                                            <li>üë• Âçî‰ΩúÂäüËÉΩ</li>
                                            <li>üîä Ë™ûÈü≥Ëº∏ÂÖ•Ëº∏Âá∫</li>
                                            <li>üìä Êï∏ÊìöÂàÜÊûêËàáË¶ñË¶∫Âåñ</li>
                                            <li>üåç ÁøªË≠ØËàáÂúãÈöõÂåñ</li>
                                        </ul>
                                        Ë´ãÈÅ∏ÊìáÂäüËÉΩÈñãÂßã‰ΩøÁî®ÔºÅ
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Input Area -->
                            <div class="input-area">
                                <div class="input-wrapper">
                                    <div class="input-group">
                                        <button class="btn btn-outline-secondary" type="button" id="fileUploadBtn">
                                            <i class="fas fa-paperclip"></i>
                                        </button>
                                        <input type="file" id="fileInput" multiple accept=".txt,.doc,.docx,.pdf,.png,.jpg,.jpeg,.gif,.csv,.xlsx,.xls,.ppt,.pptx" style="display: none;">
                                        <textarea class="form-control" id="messageInput" placeholder="Ëº∏ÂÖ•Ë®äÊÅØ... (Êåâ Ctrl+Enter ÁôºÈÄÅ)" rows="1"></textarea>
                                        <button class="btn btn-outline-secondary" type="button" id="voiceInputBtn">
                                            <i class="fas fa-microphone"></i>
                                        </button>
                                        <button class="btn btn-primary" type="button" id="sendBtn">
                                            <i class="fas fa-paper-plane"></i>
                                        </button>
                                    </div>
                                    <div class="input-status" id="inputStatus"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Files Panel -->
                    <div class="tab-pane fade" id="files-panel" role="tabpanel">
                        <div class="panel-container">
                            <h4 class="mb-4">Ê™îÊ°àËôïÁêÜ‰∏≠ÂøÉ</h4>
                            
                            <!-- File Upload Section -->
                            <div class="card mb-4">
                                <div class="card-header">
                                    <h5 class="mb-0"><i class="fas fa-upload me-2"></i>Ê™îÊ°à‰∏äÂÇ≥</h5>
                                </div>
                                <div class="card-body">
                                    <div class="upload-area" id="uploadArea">
                                        <div class="upload-content">
                                            <i class="fas fa-cloud-upload-alt fa-3x mb-3"></i>
                                            <h5>ÊãñÊãΩÊ™îÊ°àÂà∞Ê≠§ËôïÊàñÈªûÊìä‰∏äÂÇ≥</h5>
                                            <p class="text-muted">ÊîØÊè¥Êñá‰ª∂„ÄÅÂúñÁâá„ÄÅÈü≥È†ª„ÄÅË¶ñÈ†ªÁ≠âÂ§öÁ®ÆÊ†ºÂºè</p>
                                            <button type="button" class="btn btn-primary" id="selectFilesBtn">
                                                <i class="fas fa-folder-open me-2"></i>ÈÅ∏ÊìáÊ™îÊ°à
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- File List -->
                            <div class="card mb-4">
                                <div class="card-header">
                                    <h5 class="mb-0"><i class="fas fa-list me-2"></i>Â∑≤‰∏äÂÇ≥Ê™îÊ°à</h5>
                                </div>
                                <div class="card-body">
                                    <div id="filesList" class="files-list">
                                        <!-- Uploaded files will appear here -->
                                        <div class="text-center text-muted">
                                            <i class="fas fa-inbox fa-2x mb-2"></i>
                                            <p>Â∞öÊú™‰∏äÂÇ≥‰ªª‰ΩïÊ™îÊ°à</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- File Analysis -->
                            <div class="card">
                                <div class="card-header">
                                    <h5 class="mb-0"><i class="fas fa-chart-bar me-2"></i>Ê™îÊ°àÂàÜÊûêÁµêÊûú</h5>
                                </div>
                                <div class="card-body">
                                    <div id="analysisResults" class="analysis-results">
                                        <!-- Analysis results will appear here -->
                                        <div class="text-center text-muted">
                                            <i class="fas fa-search fa-2x mb-2"></i>
                                            <p>ÈÅ∏ÊìáÊ™îÊ°àÈÄ≤Ë°åÂàÜÊûê</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Tools Panel -->
                    <div class="tab-pane fade" id="tools-panel" role="tabpanel">
                        <div class="panel-container">
                            <h4 class="mb-4">ÂØ¶Áî®Â∑•ÂÖ∑</h4>
                            
                            <div class="row">
                                <!-- Calculator -->
                                <div class="col-md-6 col-lg-4 mb-4">
                                    <div class="card tool-card">
                                        <div class="card-body text-center">
                                            <i class="fas fa-calculator fa-2x mb-3"></i>
                                            <h5>Ë®àÁÆóÊ©ü</h5>
                                            <p class="text-muted">Âº∑Â§ßÁöÑÊï∏Â≠∏Ë®àÁÆóÂ∑•ÂÖ∑</p>
                                            <button type="button" class="btn btn-primary" id="calculatorBtn">
                                                ÈñãÂïü
                                            </button>
                                        </div>
                                    </div>
                                </div>
                                
                                <!-- QR Code Generator -->
                                <div class="col-md-6 col-lg-4 mb-4">
                                    <div class="card tool-card">
                                        <div class="card-body text-center">
                                            <i class="fas fa-qrcode fa-2x mb-3"></i>
                                            <h5>QRÁ¢ºÁîüÊàêÂô®</h5>
                                            <p class="text-muted">ÁîüÊàêËá™Ë®ÇQRÁ¢º</p>
                                            <button type="button" class="btn btn-primary" id="qrCodeBtn">
                                                ÈñãÂïü
                                            </button>
                                        </div>
                                    </div>
                                </div>
                                
                                <!-- Barcode Generator -->
                                <div class="col-md-6 col-lg-4 mb-4">
                                    <div class="card tool-card">
                                        <div class="card-body text-center">
                                            <i class="fas fa-barcode fa-2x mb-3"></i>
                                            <h5>Ê¢ùÁ¢ºÁîüÊàêÂô®</h5>
                                            <p class="text-muted">ÁîüÊàêÂêÑÁ®ÆÊ¢ùÁ¢ºÊ†ºÂºè</p>
                                            <button type="button" class="btn btn-primary" id="barcodeBtn">
                                                ÈñãÂïü
                                            </button>
                                        </div>
                                    </div>
                                </div>
                                
                                <!-- Design Generator -->
                                <div class="col-md-6 col-lg-4 mb-4">
                                    <div class="card tool-card">
                                        <div class="card-body text-center">
                                            <i class="fas fa-palette fa-2x mb-3"></i>
                                            <h5>CanvaÂºèË®≠Ë®à</h5>
                                            <p class="text-muted">AIËá™ÂãïË®≠Ë®àÁîüÊàê</p>
                                            <button type="button" class="btn btn-primary" id="designBtn">
                                                ÈñãÂïü
                                            </button>
                                        </div>
                                    </div>
                                </div>
                                
                                <!-- Password Generator -->
                                <div class="col-md-6 col-lg-4 mb-4">
                                    <div class="card tool-card">
                                        <div class="card-body text-center">
                                            <i class="fas fa-key fa-2x mb-3"></i>
                                            <h5>ÂØÜÁ¢ºÁîüÊàêÂô®</h5>
                                            <p class="text-muted">ÁîüÊàêÂÆâÂÖ®ÂØÜÁ¢º</p>
                                            <button type="button" class="btn btn-primary" id="passwordGenBtn">
                                                ÈñãÂïü
                                            </button>
                                        </div>
                                    </div>
                                </div>
                                
                                <!-- URL Shortener -->
                                <div class="col-md-6 col-lg-4 mb-4">
                                    <div class="card tool-card">
                                        <div class="card-body text-center">
                                            <i class="fas fa-link fa-2x mb-3"></i>
                                            <h5>Á∂≤ÂùÄÁ∏ÆÁü≠</h5>
                                            <p class="text-muted">Á∏ÆÁü≠Èï∑Á∂≤ÂùÄ</p>
                                            <button type="button" class="btn btn-primary" id="urlShortenerBtn">
                                                ÈñãÂïü
                                            </button>
                                        </div>
                                    </div>
                                </div>
                                
                                <!-- Date Time Converter -->
                                <div class="col-md-6 col-lg-4 mb-4">
                                    <div class="card tool-card">
                                        <div class="card-body text-center">
                                            <i class="fas fa-clock fa-2x mb-3"></i>
                                            <h5>ÊôÇÈñìËΩâÊèõ</h5>
                                            <p class="text-muted">ÊôÇÈñìÊ†ºÂºèËΩâÊèõ</p>
                                            <button type="button" class="btn btn-primary" id="dateTimeBtn">
                                                ÈñãÂïü
                                            </button>
                                        </div>
                                    </div>
                                </div>
                                
                                <!-- Color Picker -->
                                <div class="col-md-6 col-lg-4 mb-4">
                                    <div class="card tool-card">
                                        <div class="card-body text-center">
                                            <i class="fas fa-palette fa-2x mb-3"></i>
                                            <h5>È°èËâ≤ÈÅ∏ÊìáÂô®</h5>
                                            <p class="text-muted">ÈÅ∏ÊìáÂíåËΩâÊèõÈ°èËâ≤</p>
                                            <button type="button" class="btn btn-primary" id="colorPickerBtn">
                                                ÈñãÂïü
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Settings Panel -->
                    <div class="tab-pane fade" id="settings-panel" role="tabpanel">
                        <div class="panel-container">
                            <h4 class="mb-4">ÂÄã‰∫∫Ë®≠ÂÆö</h4>
                            
                            <div class="row">
                                <div class="col-lg-8">
                                    <!-- Appearance Settings -->
                                    <div class="card mb-4">
                                        <div class="card-header">
                                            <h5 class="mb-0"><i class="fas fa-palette me-2"></i>Â§ñËßÄË®≠ÂÆö</h5>
                                        </div>
                                        <div class="card-body">
                                            <div class="row">
                                                <div class="col-md-6 mb-3">
                                                    <label for="themeSelect" class="form-label">‰∏ªÈ°å</label>
                                                    <select class="form-select" id="themeSelect">
                                                        <option value="dark">Ê∑±Ëâ≤‰∏ªÈ°å</option>
                                                        <option value="light">Ê∑∫Ëâ≤‰∏ªÈ°å</option>
                                                        <option value="auto">Ë∑üÈö®Á≥ªÁµ±</option>
                                                    </select>
                                                </div>
                                                <div class="col-md-6 mb-3">
                                                    <label for="fontSizeSelect" class="form-label">Â≠óÈ´îÂ§ßÂ∞è</label>
                                                    <select class="form-select" id="fontSizeSelect">
                                                        <option value="small">Â∞è</option>
                                                        <option value="medium" selected>‰∏≠</option>
                                                        <option value="large">Â§ß</option>
                                                        <option value="xl">ÁâπÂ§ß</option>
                                                    </select>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <!-- AI Settings -->
                                    <div class="card mb-4">
                                        <div class="card-header">
                                            <h5 class="mb-0"><i class="fas fa-robot me-2"></i>AI Ë®≠ÂÆö</h5>
                                        </div>
                                        <div class="card-body">
                                            <div class="row">
                                                <div class="col-md-6 mb-3">
                                                    <label for="aiToneSelect" class="form-label">AI Ë™ûÊ∞£</label>
                                                    <select class="form-select" id="aiToneSelect">
                                                        <option value="friendly" selected>ÂèãÂñÑ</option>
                                                        <option value="professional">Â∞àÊ•≠</option>
                                                        <option value="casual">ËºïÈ¨Ü</option>
                                                        <option value="formal">Ê≠£Âºè</option>
                                                    </select>
                                                </div>
                                                <div class="col-md-6 mb-3">
                                                    <label for="typingSpeedRange" class="form-label">ÊâìÂ≠óÈÄüÂ∫¶</label>
                                                    <input type="range" class="form-range" id="typingSpeedRange" min="20" max="100" value="50">
                                                    <div class="d-flex justify-content-between">
                                                        <small>ÊÖ¢</small>
                                                        <small>Âø´</small>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="form-check">
                                                <input class="form-check-input" type="checkbox" id="typewriterEffect" checked>
                                                <label class="form-check-label" for="typewriterEffect">
                                                    ÂïüÁî®ÈÄêÂ≠óÈ°ØÁ§∫ÊïàÊûú
                                                </label>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <!-- Voice Settings -->
                                    <div class="card mb-4">
                                        <div class="card-header">
                                            <h5 class="mb-0"><i class="fas fa-volume-up me-2"></i>Ë™ûÈü≥Ë®≠ÂÆö</h5>
                                        </div>
                                        <div class="card-body">
                                            <div class="form-check mb-3">
                                                <input class="form-check-input" type="checkbox" id="voiceInput">
                                                <label class="form-check-label" for="voiceInput">
                                                    ÂïüÁî®Ë™ûÈü≥Ëº∏ÂÖ•
                                                </label>
                                            </div>
                                            <div class="form-check mb-3">
                                                <input class="form-check-input" type="checkbox" id="voiceOutput">
                                                <label class="form-check-label" for="voiceOutput">
                                                    ÂïüÁî®Ë™ûÈü≥Ëº∏Âá∫
                                                </label>
                                            </div>
                                            <div class="row">
                                                <div class="col-md-6 mb-3">
                                                    <label for="voiceLanguage" class="form-label">Ë™ûÈü≥Ë™ûË®Ä</label>
                                                    <select class="form-select" id="voiceLanguage">
                                                        <option value="zh-TW" selected>ÁπÅÈ´î‰∏≠Êñá</option>
                                                        <option value="zh-CN">Á∞°È´î‰∏≠Êñá</option>
                                                        <option value="en-US">Ëã±Ë™û (ÁæéÂúã)</option>
                                                        <option value="ja-JP">Êó•Ë™û</option>
                                                        <option value="ko-KR">ÈüìË™û</option>
                                                    </select>
                                                </div>
                                                <div class="col-md-6 mb-3">
                                                    <label for="voiceSpeed" class="form-label">Ë™ûÈü≥ÈÄüÂ∫¶</label>
                                                    <input type="range" class="form-range" id="voiceSpeed" min="0.5" max="2" step="0.1" value="1">
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="col-lg-4">
                                    <!-- Quick Actions -->
                                    <div class="card mb-4">
                                        <div class="card-header">
                                            <h5 class="mb-0"><i class="fas fa-lightning-bolt me-2"></i>Âø´ÈÄüÂãï‰Ωú</h5>
                                        </div>
                                        <div class="card-body">
                                            <div class="d-grid gap-2">
                                                <button type="button" class="btn btn-outline-primary" id="exportSettingsBtn">
                                                    <i class="fas fa-download me-2"></i>ÂåØÂá∫Ë®≠ÂÆö
                                                </button>
                                                <button type="button" class="btn btn-outline-secondary" id="importSettingsBtn">
                                                    <i class="fas fa-upload me-2"></i>ÂåØÂÖ•Ë®≠ÂÆö
                                                </button>
                                                <button type="button" class="btn btn-outline-warning" id="resetSettingsBtn">
                                                    <i class="fas fa-undo me-2"></i>ÈáçË®≠È†êË®≠ÂÄº
                                                </button>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <!-- Storage Info -->
                                    <div class="card">
                                        <div class="card-header">
                                            <h5 class="mb-0"><i class="fas fa-hdd me-2"></i>ÂÑ≤Â≠òÁ©∫Èñì</h5>
                                        </div>
                                        <div class="card-body">
                                            <div class="mb-3">
                                                <div class="d-flex justify-content-between">
                                                    <span>Â∞çË©±Ë®òÈåÑ</span>
                                                    <span id="chatStorageUsed">0 MB</span>
                                                </div>
                                                <div class="progress">
                                                    <div class="progress-bar" id="chatStorageBar" style="width: 0%"></div>
                                                </div>
                                            </div>
                                            <div class="mb-3">
                                                <div class="d-flex justify-content-between">
                                                    <span>‰∏äÂÇ≥Ê™îÊ°à</span>
                                                    <span id="fileStorageUsed">0 MB</span>
                                                </div>
                                                <div class="progress">
                                                    <div class="progress-bar" id="fileStorageBar" style="width: 0%"></div>
                                                </div>
                                            </div>
                                            <div class="text-center">
                                                <button type="button" class="btn btn-outline-danger btn-sm" id="clearStorageBtn">
                                                    <i class="fas fa-trash me-2"></i>Ê∏ÖÈô§ÊâÄÊúâË≥áÊñô
                                                </button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Collaborate Panel -->
                    <div class="tab-pane fade" id="collaborate-panel" role="tabpanel">
                        <div class="panel-container">
                            <h4 class="mb-4">Âçî‰ΩúÂäüËÉΩ</h4>
                            
                            <div class="row">
                                <div class="col-lg-8">
                                    <!-- Create Room -->
                                    <div class="card mb-4">
                                        <div class="card-header">
                                            <h5 class="mb-0"><i class="fas fa-plus-circle me-2"></i>ÂâµÂª∫Âçî‰ΩúÊàøÈñì</h5>
                                        </div>
                                        <div class="card-body">
                                            <div class="row">
                                                <div class="col-md-6 mb-3">
                                                    <label for="roomName" class="form-label">ÊàøÈñìÂêçÁ®±</label>
                                                    <input type="text" class="form-control" id="roomName" placeholder="Ëº∏ÂÖ•ÊàøÈñìÂêçÁ®±">
                                                </div>
                                                <div class="col-md-6 mb-3">
                                                    <label for="maxParticipants" class="form-label">ÊúÄÂ§ßÂèÉËàáËÄÖ</label>
                                                    <select class="form-select" id="maxParticipants">
                                                        <option value="2">2 ‰∫∫</option>
                                                        <option value="5">5 ‰∫∫</option>
                                                        <option value="10" selected>10 ‰∫∫</option>
                                                        <option value="20">20 ‰∫∫</option>
                                                        <option value="50">50 ‰∫∫</option>
                                                    </select>
                                                </div>
                                            </div>
                                            <button type="button" class="btn btn-primary" id="createRoomBtn">
                                                <i class="fas fa-door-open me-2"></i>ÂâµÂª∫ÊàøÈñì
                                            </button>
                                        </div>
                                    </div>
                                    
                                    <!-- Join Room -->
                                    <div class="card mb-4">
                                        <div class="card-header">
                                            <h5 class="mb-0"><i class="fas fa-sign-in-alt me-2"></i>Âä†ÂÖ•Âçî‰ΩúÊàøÈñì</h5>
                                        </div>
                                        <div class="card-body">
                                            <div class="input-group">
                                                <input type="text" class="form-control" id="roomCode" placeholder="Ëº∏ÂÖ•ÊàøÈñì‰ª£Á¢º">
                                                <button type="button" class="btn btn-primary" id="joinRoomBtn">
                                                    <i class="fas fa-sign-in-alt me-2"></i>Âä†ÂÖ•
                                                </button>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <!-- Active Rooms -->
                                    <div class="card">
                                        <div class="card-header">
                                            <h5 class="mb-0"><i class="fas fa-users me-2"></i>Ê¥ªË∫çÊàøÈñì</h5>
                                        </div>
                                        <div class="card-body">
                                            <div id="activeRoomsList" class="active-rooms-list">
                                                <!-- Active rooms will appear here -->
                                                <div class="text-center text-muted">
                                                    <i class="fas fa-door-closed fa-2x mb-2"></i>
                                                    <p>Êö´ÁÑ°Ê¥ªË∫çÊàøÈñì</p>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="col-lg-4">
                                    <!-- Current Room Info -->
                                    <div class="card mb-4" id="currentRoomCard" style="display: none;">
                                        <div class="card-header">
                                            <h5 class="mb-0"><i class="fas fa-info-circle me-2"></i>Áï∂ÂâçÊàøÈñì</h5>
                                        </div>
                                        <div class="card-body">
                                            <div id="currentRoomInfo">
                                                <!-- Current room info will appear here -->
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <!-- Participants -->
                                    <div class="card" id="participantsCard" style="display: none;">
                                        <div class="card-header">
                                            <h5 class="mb-0"><i class="fas fa-users me-2"></i>ÂèÉËàáËÄÖ</h5>
                                        </div>
                                        <div class="card-body">
                                            <div id="participantsList" class="participants-list">
                                                <!-- Participants will appear here -->
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Games Panel -->
                    <div class="tab-pane fade" id="games-panel" role="tabpanel">
                        <div class="panel-container">
                            <h4 class="mb-4">ÈÅäÊà≤‰∏≠ÂøÉ</h4>
                            
                            <div class="row">
                                <div class="col-lg-8">
                                    <!-- Game Selection -->
                                    <div class="card mb-4">
                                        <div class="card-header">
                                            <h5 class="mb-0"><i class="fas fa-gamepad me-2"></i>ÈÅäÊà≤ÈÅ∏Êìá</h5>
                                        </div>
                                        <div class="card-body">
                                            <div class="row">
                                                <div class="col-md-4 mb-3">
                                                    <div class="card text-center game-card" onclick="loadGame('tetris')">
                                                        <div class="card-body">
                                                            <i class="fas fa-th-large fa-2x mb-2 text-primary"></i>
                                                            <h5 class="card-title">‰øÑÁæÖÊñØÊñπÂ°ä</h5>
                                                            <p class="card-text">Á∂ìÂÖ∏ÁöÑ‰øÑÁæÖÊñØÊñπÂ°äÈÅäÊà≤</p>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="col-md-4 mb-3">
                                                    <div class="card text-center game-card" onclick="loadGame('mahjong')">
                                                        <div class="card-body">
                                                            <i class="fas fa-square fa-2x mb-2 text-success"></i>
                                                            <h5 class="card-title">È∫ªÂ∞á</h5>
                                                            <p class="card-text">4‰∫∫È∫ªÂ∞áÈÅäÊà≤</p>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="col-md-4 mb-3">
                                                    <div class="card text-center game-card" onclick="loadGame('farm')">
                                                        <div class="card-body">
                                                            <i class="fas fa-seedling fa-2x mb-2 text-warning"></i>
                                                            <h5 class="card-title">Ëæ≤Â†¥Áâ©Ë™û</h5>
                                                            <p class="card-text">Ëæ≤Â†¥Ê®°Êì¨RPGÈÅäÊà≤</p>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <!-- Game Container -->
                                    <div class="card">
                                        <div class="card-header">
                                            <h5 class="mb-0"><i class="fas fa-play me-2"></i>ÈÅäÊà≤Áï´Èù¢</h5>
                                        </div>
                                        <div class="card-body">
                                            <div id="gameContainer" class="game-container">
                                                <div class="text-center text-muted">
                                                    <i class="fas fa-gamepad fa-3x mb-3"></i>
                                                    <h5>Ë´ãÈÅ∏Êìá‰∏ÄÂÄãÈÅäÊà≤ÈñãÂßã</h5>
                                                    <p>ÈªûÊìä‰∏äÊñπÁöÑÈÅäÊà≤Âç°Áâá‰æÜËºâÂÖ•ÈÅäÊà≤</p>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="col-lg-4">
                                    <!-- Game Info -->
                                    <div class="card mb-4">
                                        <div class="card-header">
                                            <h5 class="mb-0"><i class="fas fa-info-circle me-2"></i>ÈÅäÊà≤Ë≥áË®ä</h5>
                                        </div>
                                        <div class="card-body">
                                            <div id="gameInfo">
                                                <p>ÈÅ∏ÊìáÈÅäÊà≤ÂæåÂ∞áÈ°ØÁ§∫Áõ∏ÈóúË≥áË®ä</p>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <!-- Game Controls -->
                                    <div class="card">
                                        <div class="card-header">
                                            <h5 class="mb-0"><i class="fas fa-cog me-2"></i>ÈÅäÊà≤ÊéßÂà∂</h5>
                                        </div>
                                        <div class="card-body">
                                            <div id="gameControls">
                                                <p>ÈÅäÊà≤ËºâÂÖ•ÂæåÂ∞áÈ°ØÁ§∫ÊéßÂà∂ÈÅ∏È†Ö</p>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Loading Overlay -->
    <div id="loadingOverlay" class="loading-overlay" style="display: none;">
        <div class="loading-content">
            <div class="spinner-border text-primary mb-3" role="status">
                <span class="visually-hidden">Loading...</span>
            </div>
            <div class="loading-text">ËôïÁêÜ‰∏≠...</div>
        </div>
    </div>
    
    <!-- Modals -->
    <!-- QR Code Generator Modal -->
    <div class="modal fade" id="qrCodeModal" tabindex="-1" aria-labelledby="qrCodeModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="qrCodeModalLabel">QRÁ¢ºÁîüÊàêÂô®</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div class="mb-3">
                        <label for="qrText" class="form-label">Ëº∏ÂÖ•ÊñáÂ≠óÊàñÁ∂≤ÂùÄ</label>
                        <textarea class="form-control" id="qrText" rows="3" placeholder="Ë´ãËº∏ÂÖ•Ë¶ÅÁîüÊàêQRÁ¢ºÁöÑÊñáÂ≠óÊàñÁ∂≤ÂùÄ"></textarea>
                    </div>
                    <div class="row">
                        <div class="col-md-6">
                            <label for="qrSize" class="form-label">Â§ßÂ∞è</label>
                            <select class="form-select" id="qrSize">
                                <option value="8">Â∞è (8)</option>
                                <option value="10" selected>‰∏≠ (10)</option>
                                <option value="12">Â§ß (12)</option>
                                <option value="15">ÁâπÂ§ß (15)</option>
                            </select>
                        </div>
                        <div class="col-md-6">
                            <label for="qrBorder" class="form-label">ÈÇäÊ°Ü</label>
                            <select class="form-select" id="qrBorder">
                                <option value="2">Á™Ñ (2)</option>
                                <option value="4" selected>Ê®ôÊ∫ñ (4)</option>
                                <option value="6">ÂØ¨ (6)</option>
                            </select>
                        </div>
                    </div>
                    <div class="mt-3">
                        <button type="button" class="btn btn-primary" id="generateQRBtn">ÁîüÊàêQRÁ¢º</button>
                        <button type="button" class="btn btn-success" id="downloadQRBtn" style="display:none;">‰∏ãËºâQRÁ¢º</button>
                    </div>
                    <div id="qrResult" class="mt-3 text-center" style="display:none;">
                        <img id="qrImage" src="" alt="QR Code" class="img-fluid" style="max-width: 300px;">
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Barcode Generator Modal -->
    <div class="modal fade" id="barcodeModal" tabindex="-1" aria-labelledby="barcodeModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="barcodeModalLabel">Ê¢ùÁ¢ºÁîüÊàêÂô®</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div class="mb-3">
                        <label for="barcodeText" class="form-label">Ëº∏ÂÖ•ÊñáÂ≠óÊàñÊï∏Â≠ó</label>
                        <input type="text" class="form-control" id="barcodeText" placeholder="Ë´ãËº∏ÂÖ•Ë¶ÅÁîüÊàêÊ¢ùÁ¢ºÁöÑÊñáÂ≠óÊàñÊï∏Â≠ó">
                    </div>
                    <div class="mb-3">
                        <label for="barcodeType" class="form-label">Ê¢ùÁ¢ºÈ°ûÂûã</label>
                        <select class="form-select" id="barcodeType">
                            <option value="code128" selected>Code 128</option>
                            <option value="code39">Code 39</option>
                            <option value="ean13">EAN-13</option>
                            <option value="ean8">EAN-8</option>
                            <option value="upc">UPC-A</option>
                            <option value="isbn13">ISBN-13</option>
                            <option value="isbn10">ISBN-10</option>
                            <option value="issn">ISSN</option>
                        </select>
                    </div>
                    <div class="mt-3">
                        <button type="button" class="btn btn-primary" id="generateBarcodeBtn">ÁîüÊàêÊ¢ùÁ¢º</button>
                        <button type="button" class="btn btn-success" id="downloadBarcodeBtn" style="display:none;">‰∏ãËºâÊ¢ùÁ¢º</button>
                    </div>
                    <div id="barcodeResult" class="mt-3 text-center" style="display:none;">
                        <img id="barcodeImage" src="" alt="Barcode" class="img-fluid" style="max-width: 400px;">
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    
    <!-- Prism.js for syntax highlighting -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-python.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-javascript.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-css.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-html.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-sql.min.js"></script>
    
    <!-- Socket.IO -->
    <script src="https://cdn.socket.io/4.7.2/socket.io.min.js"></script>
    
    <!-- Chart.js for data visualization -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    
    <!-- Custom JavaScript -->
    <script src="{{ url_for('static', filename='js/enhanced_app.js') }}"></script>
    <script src="{{ url_for('static', filename='js/file_handler.js') }}"></script>
    <script src="{{ url_for('static', filename='js/tools.js') }}"></script>
    <script src="{{ url_for('static', filename='js/voice.js') }}"></script>
    <script src="{{ url_for('static', filename='js/collaboration.js') }}"></script>
    <script src="{{ url_for('static', filename='js/games_standalone.js') }}"></script>
    <script src="{{ url_for('static', filename='js/document_generator.js') }}"></script>

            const gameContainer = document.getElementById('gameContainer');
            const gameInfo = document.getElementById('gameInfo');
            const gameControls = document.getElementById('gameControls');
            
            gameInfo.innerHTML = '<h6>È∫ªÂ∞á</h6><p>4‰∫∫È∫ªÂ∞áÈÅäÊà≤ÔºåÈªûÊìäÁâåÂºµÈÄ≤Ë°åÈÅäÊà≤</p>';
            gameControls.innerHTML = '<button class="btn btn-primary" onclick="startMahjongInPanel()">ÈñãÂßãÈÅäÊà≤</button>';
            
            // Áõ¥Êé•ËºâÂÖ•È∫ªÂ∞áÈÅäÊà≤
            startMahjongInPanel();
        }
        
        function loadFarmStoryGame() {
            const gameContainer = document.getElementById('gameContainer');
            const gameInfo = document.getElementById('gameInfo');
            const gameControls = document.getElementById('gameControls');
            
            gameInfo.innerHTML = '<h6>Ëæ≤Â†¥Áâ©Ë™û</h6><p>Ëæ≤Â†¥RPGÈÅäÊà≤ÔºåËàáNPCÂ∞çË©±‰∏¶ÁÆ°ÁêÜËæ≤Â†¥</p>';
            gameControls.innerHTML = '<button class="btn btn-primary" onclick="startFarmStoryInPanel()">ÈñãÂßãÈÅäÊà≤</button>';
            
            // Áõ¥Êé•ËºâÂÖ•Ëæ≤Â†¥ÊïÖ‰∫ãÈÅäÊà≤
            startFarmStoryInPanel();
        }
        }
        
        // ÂÖ®ÂüüÈÅäÊà≤ÂïüÂãïÂáΩÊï∏
        function startTetrisInPanel() {
            const gameContainer = document.getElementById('gameContainer');
            gameContainer.innerHTML = `
                <div class="tetris-container text-center">
                    <h5>‰øÑÁæÖÊñØÊñπÂ°ä</h5>
                    <canvas id="tetrisCanvas" width="300" height="600" style="border: 1px solid #ccc;"></canvas>
                    <div class="mt-3">
                        <p>‰ΩøÁî®ÊñπÂêëÈçµÊéßÂà∂Ôºö‚Üê ‚Üí ‚Üì ÁßªÂãïÔºå‚Üë ÊóãËΩâ</p>
                        <button class="btn btn-success" onclick="initTetrisGame()">ÈáçÊñ∞ÈñãÂßã</button>
                    </div>
                </div>
            `;
            initTetrisGame();
        }
        
        function startMahjongInPanel() {
            const gameContainer = document.getElementById('gameContainer');
            gameContainer.innerHTML = `
                <div class="mahjong-container">
                    <h5 class="text-center mb-3">È∫ªÂ∞áÈÅäÊà≤</h5>
                    <div id="mahjongBoard" class="mahjong-board"></div>
                    <div class="text-center mt-3">
                        <button class="btn btn-success" onclick="initMahjongGame()">ÈñãÂßãÊñ∞Â±Ä</button>
                    </div>
                </div>
            `;
            initMahjongGame();
        }
        
        function startFarmStoryInPanel() {
            const gameContainer = document.getElementById('gameContainer');
            gameContainer.innerHTML = `
                <div class="farm-story-container">
                    <h5 class="text-center mb-3">Ëæ≤Â†¥Áâ©Ë™û</h5>
                    <div id="farmStoryBoard" class="farm-story-board"></div>
                    <div class="text-center mt-3">
                        <button class="btn btn-success" onclick="initFarmStoryGame()">ÈñãÂßãÈÅäÊà≤</button>
                    </div>
                </div>
            `;
            initFarmStoryGame();
        }
        
        // Á∞°ÂåñÁöÑÈÅäÊà≤ÂàùÂßãÂåñÂáΩÊï∏
        function initTetrisGame() {
            console.log('ÂàùÂßãÂåñ‰øÑÁæÖÊñØÊñπÂ°äÈÅäÊà≤');
            // ÈÄôË£°ÂèØ‰ª•Ê∑ªÂä†ÂØ¶ÈöõÁöÑ‰øÑÁæÖÊñØÊñπÂ°äÈÅäÊà≤ÈÇèËºØ
        }
        
        function initMahjongGame() {
            const board = document.getElementById('mahjongBoard');
            board.innerHTML = `
                <div class="text-center">
                    <p>4‰∫∫È∫ªÂ∞áÈÅäÊà≤Ê∫ñÂÇô‰∏≠...</p>
                    <div class="mahjong-tiles">
                        <div class="tile">üÄÑ</div>
                        <div class="tile">üÄÖ</div>
                        <div class="tile">üÄÜ</div>
                        <div class="tile">üÄá</div>
                    </div>
                </div>
            `;
        }
        
        function initFarmStoryGame() {
            const board = document.getElementById('farmStoryBoard');
            board.innerHTML = `
                <div class="farm-story-ui">
                    <div class="story-panel">
                        <h6>Ê≠°Ëøé‰æÜÂà∞Ëæ≤Â†¥Áâ©Ë™ûÔºÅ</h6>
                        <p>‰Ω†ÁπºÊâø‰∫ÜÁ•ñÁà∂ÁöÑËæ≤Â†¥ÔºåÈñãÂßã‰Ω†ÁöÑËæ≤Â†¥ÁîüÊ¥ªÂêßÔºÅ</p>
                        <div class="npc-area">
                            <button class="btn btn-sm btn-outline-primary me-2" onclick="talkToNPC('ÊùëÈï∑ÊπØÂßÜ')">ÊùëÈï∑ÊπØÂßÜ</button>
                            <button class="btn btn-sm btn-outline-success me-2" onclick="talkToNPC('ÂïÜÂ∫óËÄÅÈóÜÁë™È∫ó')">ÂïÜÂ∫óÁë™È∫ó</button>
                            <button class="btn btn-sm btn-outline-warning me-2" onclick="talkToNPC('ÈêµÂå†ÂÇëÂÖã')">ÈêµÂå†ÂÇëÂÖã</button>
                            <button class="btn btn-sm btn-outline-info" onclick="talkToNPC('ÈÜ´ÁîüËéâËéâ')">ÈÜ´ÁîüËéâËéâ</button>
                        </div>
                    </div>
                </div>
            `;
        }
        
        function talkToNPC(npcName) {
            const board = document.getElementById('farmStoryBoard');
            let dialogue = '';
            
            switch(npcName) {
                case 'ÊùëÈï∑ÊπØÂßÜ':
                    dialogue = `
                        <div class="dialogue-box">
                            <h6>ÊùëÈï∑ÊπØÂßÜ</h6>
                            <p>"Ê≠°ËøéÂõûÂà∞Ëæ≤Â†¥ÔºÅ‰Ω†Á•ñÁà∂ÁöÑËæ≤Â†¥ÈúÄË¶Å‰Ω†ÁöÑÁÖßÊñô„ÄÇË¶Å‰∏çË¶ÅÂÖàÂéªÁî∞Ë£°Á®Æ‰∫õ‰ΩúÁâ©Ôºü"</p>
                            <button class="btn btn-sm btn-primary" onclick="goToFarm()">ÂéªËæ≤Â†¥</button>
                            <button class="btn btn-sm btn-secondary" onclick="initFarmStoryGame()">ÂõûÂà∞‰∏ªÁï´Èù¢</button>
                        </div>
                    `;
                    break;
                case 'ÂïÜÂ∫óËÄÅÈóÜÁë™È∫ó':
                    dialogue = `
                        <div class="dialogue-box">
                            <h6>ÂïÜÂ∫óËÄÅÈóÜÁë™È∫ó</h6>
                            <p>"ÈúÄË¶ÅÁ®ÆÂ≠êÂóéÔºüÊàëÈÄôË£°ÊúâÊñ∞ÈÆÆÁöÑËòøËîîÂíåÁéâÁ±≥Á®ÆÂ≠êÔºÅ"</p>
                            <button class="btn btn-sm btn-success" onclick="buySeeds()">Ë≥ºË≤∑Á®ÆÂ≠ê</button>
                            <button class="btn btn-sm btn-secondary" onclick="initFarmStoryGame()">ÂõûÂà∞‰∏ªÁï´Èù¢</button>
                        </div>
                    `;
                    break;
                case 'ÈêµÂå†ÂÇëÂÖã':
                    dialogue = `
                        <div class="dialogue-box">
                            <h6>ÈêµÂå†ÂÇëÂÖã</h6>
                            <p>"‰Ω†ÁöÑËæ≤ÂÖ∑ÈúÄË¶ÅÂçáÁ¥ö‰∫ÜÔºÅËÆìÊàëÂπ´‰Ω†ÊâìÈÄ†Êõ¥Â•ΩÁöÑÂ∑•ÂÖ∑ÂêßÔºÅ"</p>
                            <button class="btn btn-sm btn-warning" onclick="upgradeTools()">ÂçáÁ¥öÂ∑•ÂÖ∑</button>
                            <button class="btn btn-sm btn-secondary" onclick="initFarmStoryGame()">ÂõûÂà∞‰∏ªÁï´Èù¢</button>
                        </div>
                    `;
                    break;
                case 'ÈÜ´ÁîüËéâËéâ':
                    dialogue = `
                        <div class="dialogue-box">
                            <h6>ÈÜ´ÁîüËéâËéâ</h6>
                            <p>"Ëæ≤Â†¥ÁîüÊ¥ªËæõËã¶ÔºåË®òÂæóÁÖßÈ°ßÂ•ΩËá™Â∑±ÁöÑÂÅ•Â∫∑ÔºÅÈÄôË£°Êúâ‰∏Ä‰∫õÊÅ¢Âæ©Ëó•Ê∞¥„ÄÇ"</p>
                            <button class="btn btn-sm btn-info" onclick="getHealing()">Áç≤ÂæóÊ≤ªÁôÇ</button>
                            <button class="btn btn-sm btn-secondary" onclick="initFarmStoryGame()">ÂõûÂà∞‰∏ªÁï´Èù¢</button>
                        </div>
                    `;
                    break;
            }
            
            board.innerHTML = dialogue;
        }
        
        function goToFarm() {
            const board = document.getElementById('farmStoryBoard');
            board.innerHTML = `
                <div class="farm-scene">
                    <h6>Ëæ≤Â†¥</h6>
                    <p>ÈÄôÊòØ‰Ω†ÁöÑËæ≤Â†¥ÔºåÂúüÂú∞ËÇ•Ê≤ÉÁ≠âÂæÖËÄï‰Ωú„ÄÇ</p>
                    <div class="farm-actions">
                        <button class="btn btn-sm btn-success me-2" onclick="plantCrops()">Á®ÆÊ§ç‰ΩúÁâ©</button>
                        <button class="btn btn-sm btn-primary me-2" onclick="waterCrops()">ÊæÜÊ∞¥</button>
                        <button class="btn btn-sm btn-warning me-2" onclick="harvestCrops()">Êî∂Á©´</button>
                        <button class="btn btn-sm btn-secondary" onclick="initFarmStoryGame()">ÂõûÊùëËéä</button>
                    </div>
                    <div id="farmStatus" class="mt-3">
                        <p>Ëæ≤Â†¥ÁãÄÊÖãÔºöÊ∫ñÂÇôËÄï‰Ωú</p>
                    </div>
                </div>
            `;
        }
        
        function buySeeds() {
            showMessage('‰Ω†Ë≥ºË≤∑‰∫ÜËòøËîîÁ®ÆÂ≠êÂíåÁéâÁ±≥Á®ÆÂ≠êÔºÅ');
        }
        
        function upgradeTools() {
            showMessage('‰Ω†ÁöÑËæ≤ÂÖ∑Â∑≤ÂçáÁ¥öÔºÅÊïàÁéáÊèêÂçá‰∫ÜÔºÅ');
        }
        
        function getHealing() {
            showMessage('‰Ω†ÊÑüÂà∞Á≤æÁ•ûÁôæÂÄçÔºÅÂÅ•Â∫∑ÂÄºÊÅ¢Âæ©ÔºÅ');
        }
        
        function plantCrops() {
            document.getElementById('farmStatus').innerHTML = '<p class="text-success">‰Ω†Á®Æ‰∏ã‰∫ÜÁ®ÆÂ≠êÔºÅË®òÂæóÊæÜÊ∞¥Âì¶„ÄÇ</p>';
        }
        
        function waterCrops() {
            document.getElementById('farmStatus').innerHTML = '<p class="text-info">‰Ω†Áµ¶‰ΩúÁâ©ÊæÜ‰∫ÜÊ∞¥ÔºåÂÆÉÂÄëÊ≠£Âú®ËåÅÂ£ØÊàêÈï∑ÔºÅ</p>';
        }
        
        function harvestCrops() {
            document.getElementById('farmStatus').innerHTML = '<p class="text-warning">‰Ω†Êî∂Á©´‰∫ÜÊàêÁÜüÁöÑ‰ΩúÁâ©ÔºÅÁç≤Âæó‰∫ÜÈáëÂπ£ÔºÅ</p>';
        }
        
        function showMessage(message) {
            const board = document.getElementById('farmStoryBoard');
            board.innerHTML = `
                <div class="message-box text-center">
                    <p>${message}</p>
                    <button class="btn btn-primary" onclick="initFarmStoryGame()">ÁπºÁ∫å</button>
                </div>
            `;
        }
    </script>
</body>
</html>